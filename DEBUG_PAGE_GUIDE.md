# 调试页面使用指南

## 功能概述

调试页面是一个专门用于查看和分析应用崩溃信息的工具页面。当应用发生崩溃时，崩溃信息会被自动保存，用户可以通过调试页面查看这些信息来帮助诊断问题。

## 主要功能

### 1. 查看崩溃日志
- 显示所有保存的崩溃日志文件列表
- 按时间倒序排列（最新的在前）
- 显示每个日志文件的创建时间和大小
- 点击日志文件可查看详细内容

### 2. 日志内容显示
- 完整的崩溃堆栈信息
- 设备信息（Android版本、设备型号等）
- 异常类型和消息
- 线程信息

### 3. 操作功能
- **刷新**: 重新加载崩溃日志列表
- **创建测试日志**: 生成一个测试崩溃日志用于功能测试
- **清空日志**: 删除所有崩溃日志文件
- **导出日志**: 将当前显示的日志文件分享或导出

## 使用方法

### 访问调试页面
1. 打开GPS Tracker应用
2. 在主页面点击"调试信息"按钮
3. 进入调试页面

### 查看崩溃信息
1. 在日志文件列表中选择要查看的日志
2. 日志内容会自动显示在下方的文本区域
3. 可以滚动查看完整的崩溃信息

### 导出崩溃日志
1. 选择要导出的日志文件
2. 点击"导出日志"按钮
3. 选择分享方式（邮件、文件管理器等）

## 技术实现

### 文件结构
```
app/src/main/java/com/gpstracker/app/
├── DebugActivity.kt              # 调试页面主Activity
├── utils/CrashHandler.kt         # 崩溃处理器（已存在）
└── res/
    ├── layout/activity_debug.xml # 调试页面布局
    ├── menu/debug_menu.xml       # 调试页面菜单
    └── values/colors.xml         # 颜色资源（已更新）
```

### 崩溃日志存储
- 存储位置: `应用内部存储/crash_logs/`
- 文件命名: `crash_时间戳.log`
- 自动清理: 保留最近7天的日志

### 权限要求
- 无需额外权限
- 使用应用内部存储，不需要外部存储权限

## 注意事项

1. **测试功能**: "创建测试日志"按钮仅用于测试调试页面功能，不会导致应用真正崩溃
2. **日志清理**: 建议定期清理旧的崩溃日志以节省存储空间
3. **隐私保护**: 崩溃日志包含设备信息，导出时请注意隐私保护
4. **文件大小**: 崩溃日志文件通常较小，但大量日志可能占用一定存储空间

## 故障排除

### 如果看不到崩溃日志
1. 确认应用确实发生过崩溃
2. 检查应用是否有存储权限
3. 尝试点击"刷新"按钮

### 如果无法导出日志
1. 确认已选择要导出的日志文件
2. 检查设备是否有可用的分享应用
3. 确认应用有文件访问权限

## 开发说明

### 添加新的调试信息
可以在`CrashHandler.kt`中的`saveCrashLog`方法中添加更多调试信息，例如：
- 应用状态信息
- 用户操作历史
- 网络连接状态
- 数据库状态等

### 自定义日志格式
可以修改`CrashHandler.kt`中的日志格式，添加更多有用的调试信息。

### 集成其他调试工具
调试页面可以扩展以支持其他调试功能，例如：
- 实时日志查看
- 性能监控
- 网络请求日志
- 数据库查询日志等
